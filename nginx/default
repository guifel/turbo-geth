server{
   listen 80;
   server_name turbo.reflexer.finance;
    location / {
        return 301 https://$host$request_uri;
    }
}

server {
        listen 433 ssl;
        server_name turbo.reflexer.finance;

        # Add basic auth 
        auth_basic "Protected Ethereum client";
        auth_basic_user_file /etc/nginx/.htpasswd;

        # Proxy
        location / {
                    proxy_pass http://rpcdaemon:8545;
                    proxy_set_header Host $host;
        }
}

server{
   listen 80;
   server_name turbo.reflexer.finance;
    location /grafana {
        return 301 https://$host$request_uri;
    }
}

server {
        listen 433 ssl;
        server_name turbo.reflexer.finance;

        # Add basic auth 
        auth_basic "Protected Ethereum client";
        auth_basic_user_file /etc/nginx/.htpasswd;

        # Proxy
        location /grafana {
                    proxy_pass http://grafana:3000;
                    proxy_set_header Host $host;
        }
}

server{
   listen prometheus;
   server_name turbo.reflexer.finance;
    location /prometheus {
        return 301 https://$host$request_uri;
    }
}

server {
        listen 433 ssl;
        server_name turbo.reflexer.finance;

        # Add basic auth 
        auth_basic "Protected Ethereum client";
        auth_basic_user_file /etc/nginx/.htpasswd;

        # Proxy
        location /prometheus {
                    proxy_pass http://prometheus:9090;
                    proxy_set_header Host $host;
        }
}